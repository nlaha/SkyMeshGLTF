
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyffi.spells — High level file operations &#8212; PyFFI 2.2.4.dev4 documentation</title>
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/classic.css" type="text/css" />
    
    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="pyffi.spells.cgf — Crytek Geometry/Animation (.cgf/.cga) spells" href="cgf.html" />
    <link rel="prev" title="pyffi.formats.tri — TRI (.tri)" href="../formats/tri.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cgf.html" title="pyffi.spells.cgf — Crytek Geometry/Animation (.cgf/.cga) spells"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../formats/tri.html" title="pyffi.formats.tri — TRI (.tri)"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">PyFFI 2.2.4.dev4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" accesskey="U"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi</span></code> — Interfacing block structured files</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells</span></code> — High level file operations</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-pyffi.spells"></span><div class="section" id="pyffi-spells-high-level-file-operations">
<h1><a class="reference internal" href="#module-pyffi.spells" title="pyffi.spells"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells</span></code></a> — High level file operations<a class="headerlink" href="#pyffi-spells-high-level-file-operations" title="Permalink to this headline">¶</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This module is based on wz’s NifTester module, although
nothing of wz’s original code is left in this module.</p>
</div>
<p>A <a class="reference internal" href="../../glossary.html#term-toaster"><span class="xref std std-term">toaster</span></a>, implemented by subclasses of the abstract
<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a> class, walks over all files in a folder, and applies
one or more transformations on each file. Such transformations are
called <a class="reference internal" href="../../glossary.html#term-spell"><span class="xref std std-term">spell</span></a>s, and are implemented by subclasses of the
abstract <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spell</span></code></a> class.</p>
<p>A <a class="reference internal" href="../../glossary.html#term-spell"><span class="xref std std-term">spell</span></a> can also run independently of a <a class="reference internal" href="../../glossary.html#term-toaster"><span class="xref std std-term">toaster</span></a> and be
applied on a branch directly. The recommended way of doing this is via
the <a class="reference internal" href="#pyffi.spells.Spell.recurse" title="pyffi.spells.Spell.recurse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Spell.recurse()</span></code></a> method.</p>
<div class="section" id="supported-spells">
<h2>Supported spells<a class="headerlink" href="#supported-spells" title="Permalink to this headline">¶</a></h2>
<p>For format specific spells, refer to the corresponding module.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="cgf.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells.cgf</span></code> —  Crytek Geometry/Animation (.cgf/.cga) spells</a></li>
<li class="toctree-l1"><a class="reference internal" href="dds.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells.dds</span></code> — DirectDraw Surface spells</a></li>
<li class="toctree-l1"><a class="reference internal" href="tga.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells.tga</span></code> — Targa spells</a></li>
</ul>
</div>
<p>Some spells are applicable on every file format, and those are documented
here.</p>
<dl class="py class">
<dt id="pyffi.spells.SpellApplyPatch">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellApplyPatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellApplyPatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellApplyPatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyffi.spells.Spell</span></code></a></p>
<p>A spell for applying a patch on files.</p>
<dl class="py method">
<dt id="pyffi.spells.SpellApplyPatch.datainspect">
<code class="sig-name descname">datainspect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellApplyPatch.datainspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellApplyPatch.datainspect" title="Permalink to this definition">¶</a></dt>
<dd><p>There is no need to read the whole file, so we apply the patch
already at inspection stage, and stop the spell process by returning
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">False</span></code></p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="adding-new-spells">
<h2>Adding new spells<a class="headerlink" href="#adding-new-spells" title="Permalink to this headline">¶</a></h2>
<p>To create new spells, derive your custom spells from the <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spell</span></code></a>
class, and include them in the <a class="reference internal" href="#pyffi.spells.Toaster.SPELLS" title="pyffi.spells.Toaster.SPELLS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Toaster.SPELLS</span></code></a> attribute of your
toaster.</p>
<dl class="py class">
<dt id="pyffi.spells.Spell">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">Spell</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Spell base class. A spell takes a data file and then does something
useful with it. The main entry point for spells is <a class="reference internal" href="#pyffi.spells.Spell.recurse" title="pyffi.spells.Spell.recurse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recurse()</span></code></a>, so if you
are writing new spells, start with reading the documentation with
<a class="reference internal" href="#pyffi.spells.Spell.recurse" title="pyffi.spells.Spell.recurse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recurse()</span></code></a>.</p>
<dl class="py attribute">
<dt id="pyffi.spells.Spell.READONLY">
<code class="sig-name descname">READONLY</code><em class="property"> = True</em><a class="headerlink" href="#pyffi.spells.Spell.READONLY" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">bool</span></code> which determines whether the spell is read only or
not. Default value is <code class="docutils literal notranslate"><span class="pre">True</span></code>. Override this class attribute, and
set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, when subclassing a spell that must write files
back to the disk.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Spell.SPELLNAME">
<code class="sig-name descname">SPELLNAME</code><em class="property"> = None</em><a class="headerlink" href="#pyffi.spells.Spell.SPELLNAME" title="Permalink to this definition">¶</a></dt>
<dd><p>A <code class="docutils literal notranslate"><span class="pre">str</span></code> describing how to refer to the spell from the command line.
Override this class attribute when subclassing.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.__init__">
<code class="sig-name descname">__init__</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.__init__"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize the spell data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>data</strong> (<a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data" title="pyffi.object_models.FileFormat.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a>) – The file <a class="reference internal" href="#pyffi.spells.Spell.data" title="pyffi.spells.Spell.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>.</p></li>
<li><p><strong>stream</strong> (<code class="docutils literal notranslate"><span class="pre">file</span></code>) – The file <a class="reference internal" href="#pyffi.spells.Spell.stream" title="pyffi.spells.Spell.stream"><code class="xref py py-attr docutils literal notranslate"><span class="pre">stream</span></code></a>.</p></li>
<li><p><strong>toaster</strong> (<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>) – The <a class="reference internal" href="#pyffi.spells.Spell.toaster" title="pyffi.spells.Spell.toaster"><code class="xref py py-attr docutils literal notranslate"><span class="pre">toaster</span></code></a> this spell is called from (optional).</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell._branchinspect">
<code class="sig-name descname">_branchinspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell._branchinspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell._branchinspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if spell should be cast on this branch or not, based on
exclude and include options passed on the command line. You should
not need to override this function: if you need additional checks on
whether a branch must be parsed or not, override the <a class="reference internal" href="#pyffi.spells.Spell.branchinspect" title="pyffi.spells.Spell.branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchinspect()</span></code></a>
method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the branch must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell._datainspect">
<code class="sig-name descname">_datainspect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell._datainspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell._datainspect" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called after <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data.inspect" title="pyffi.object_models.FileFormat.Data.inspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyffi.object_models.FileFormat.Data.inspect()</span></code></a> has
been called, and before <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data.read" title="pyffi.object_models.FileFormat.Data.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyffi.object_models.FileFormat.Data.read()</span></code></a> is
called.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.branchentry">
<code class="sig-name descname">branchentry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.branchentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.branchentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast the spell on the given branch. First called with branch equal to
<a class="reference internal" href="#pyffi.spells.Spell.data" title="pyffi.spells.Spell.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>’s children, then the grandchildren, and so on.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Typically, you will override this function to perform an operation
on a particular block type and/or to stop recursion at particular
block types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to cast the spell on.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the children must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.branchexit">
<code class="sig-name descname">branchexit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.branchexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.branchexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast a spell on the given branch, after all its children,
grandchildren, have been processed, if <a class="reference internal" href="#pyffi.spells.Spell.branchentry" title="pyffi.spells.Spell.branchentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchentry()</span></code></a> returned
<code class="docutils literal notranslate"><span class="pre">True</span></code> on the given branch.</p>
<p>Typically, you will override this function to perform a particular
operation on a block type, but you rely on the fact that the children
must have been processed first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to cast the spell on.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.branchinspect">
<code class="sig-name descname">branchinspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.branchinspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.branchinspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#pyffi.spells.Spell._branchinspect" title="pyffi.spells.Spell._branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_branchinspect()</span></code></a>, but for customization: can be overridden to
perform an extra inspection (the default implementation always
returns <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the branch must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Spell.data">
<code class="sig-name descname">data</code><em class="property"> = None</em><a class="headerlink" href="#pyffi.spells.Spell.data" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data" title="pyffi.object_models.FileFormat.Data"><code class="xref py py-class docutils literal notranslate"><span class="pre">Data</span></code></a> instance
this spell acts on.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.dataentry">
<code class="sig-name descname">dataentry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.dataentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.dataentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before all blocks are recursed.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.
You can access the data via <a class="reference internal" href="#pyffi.spells.Spell.data" title="pyffi.spells.Spell.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a>, and unlike in the
<a class="reference internal" href="#pyffi.spells.Spell.datainspect" title="pyffi.spells.Spell.datainspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datainspect()</span></code></a> method, the full file has been processed at this stage.</p>
<p>Typically, you will override this function to perform a global
operation on the file data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the children must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.dataexit">
<code class="sig-name descname">dataexit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.dataexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.dataexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after all blocks have been processed, if <a class="reference internal" href="#pyffi.spells.Spell.dataentry" title="pyffi.spells.Spell.dataentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataentry()</span></code></a>
returned <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Typically, you will override this function to perform a final spell
operation, such as writing back the file in a special way, or making a
summary log.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.datainspect">
<code class="sig-name descname">datainspect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.datainspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.datainspect" title="Permalink to this definition">¶</a></dt>
<dd><p>This is called after <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data.inspect" title="pyffi.object_models.FileFormat.Data.inspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyffi.object_models.FileFormat.Data.inspect()</span></code></a> has
been called, and before <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat.Data.read" title="pyffi.object_models.FileFormat.Data.read"><code class="xref py py-meth docutils literal notranslate"><span class="pre">pyffi.object_models.FileFormat.Data.read()</span></code></a> is
called. Override this function for customization.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the file must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.recurse">
<code class="sig-name descname">recurse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.recurse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.recurse" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function which calls <a class="reference internal" href="#pyffi.spells.Spell._branchinspect" title="pyffi.spells.Spell._branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_branchinspect()</span></code></a> and <a class="reference internal" href="#pyffi.spells.Spell.branchinspect" title="pyffi.spells.Spell.branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchinspect()</span></code></a>
on the branch,
if both successful then <a class="reference internal" href="#pyffi.spells.Spell.branchentry" title="pyffi.spells.Spell.branchentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchentry()</span></code></a> on the branch, and if this is
succesful it calls <a class="reference internal" href="#pyffi.spells.Spell.recurse" title="pyffi.spells.Spell.recurse"><code class="xref py py-meth docutils literal notranslate"><span class="pre">recurse()</span></code></a> on the branch’s children, and
once all children are done, it calls <a class="reference internal" href="#pyffi.spells.Spell.branchexit" title="pyffi.spells.Spell.branchexit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchexit()</span></code></a>.</p>
<p>Note that <a class="reference internal" href="#pyffi.spells.Spell._branchinspect" title="pyffi.spells.Spell._branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">_branchinspect()</span></code></a> and <a class="reference internal" href="#pyffi.spells.Spell.branchinspect" title="pyffi.spells.Spell.branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchinspect()</span></code></a> are not called upon
first entry of this function, that is, when called with <a class="reference internal" href="#pyffi.spells.Spell.data" title="pyffi.spells.Spell.data"><code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code></a> as
branch argument. Use <a class="reference internal" href="#pyffi.spells.Spell.datainspect" title="pyffi.spells.Spell.datainspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datainspect()</span></code></a> to stop recursion into this branch.</p>
<p>Do not override this function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to start the recursion from, or <code class="docutils literal notranslate"><span class="pre">None</span></code>
to recurse the whole tree.</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Spell.stream">
<code class="sig-name descname">stream</code><em class="property"> = None</em><a class="headerlink" href="#pyffi.spells.Spell.stream" title="Permalink to this definition">¶</a></dt>
<dd><p>The current <code class="docutils literal notranslate"><span class="pre">file</span></code> being processed.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.toastentry">
<em class="property">classmethod </em><code class="sig-name descname">toastentry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.toastentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.toastentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just before the toaster starts processing
all files. If it returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the spell is not used.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>For example, if the spell only acts on a particular block type, but
that block type is excluded, then you can use this function to flag
that this spell can be skipped. You can also use this function to
initialize statistics data to be aggregated from files, to
initialize a log file, and so.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>toaster</strong> (<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>) – The toaster this spell is called from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the spell applies, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Spell.toaster">
<code class="sig-name descname">toaster</code><em class="property"> = None</em><a class="headerlink" href="#pyffi.spells.Spell.toaster" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a> instance this spell is called from.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Spell.toastexit">
<em class="property">classmethod </em><code class="sig-name descname">toastexit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Spell.toastexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Spell.toastexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the toaster has finished processing
all files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>toaster</strong> (<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>) – The toaster this spell is called from.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="grouping-spells-together">
<h2>Grouping spells together<a class="headerlink" href="#grouping-spells-together" title="Permalink to this headline">¶</a></h2>
<p>It is also possible to create composite spells, that is, spells that
simply execute other spells. The following functions and classes can
be used for this purpose.</p>
<dl class="py function">
<dt id="pyffi.spells.SpellGroupParallel">
<code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellGroupParallel</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallel"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallel" title="Permalink to this definition">¶</a></dt>
<dd><p>Class factory for grouping spells in parallel.</p>
</dd></dl>

<dl class="py function">
<dt id="pyffi.spells.SpellGroupSeries">
<code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellGroupSeries</code><span class="sig-paren">(</span><em class="sig-param"><span class="o">*</span><span class="n">args</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeries"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeries" title="Permalink to this definition">¶</a></dt>
<dd><p>Class factory for grouping spells in series.</p>
</dd></dl>

<dl class="py class">
<dt id="pyffi.spells.SpellGroupBase">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellGroupBase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyffi.spells.Spell</span></code></a></p>
<p>Base class for grouping spells. This implements all the spell grouping
functions that fall outside of the actual recursing (<code class="xref py py-meth docutils literal notranslate"><span class="pre">__init__()</span></code>,
<a class="reference internal" href="#pyffi.spells.SpellGroupBase.toastentry" title="pyffi.spells.SpellGroupBase.toastentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toastentry()</span></code></a>, <code class="xref py py-meth docutils literal notranslate"><span class="pre">_datainspect()</span></code>, <a class="reference internal" href="#pyffi.spells.SpellGroupBase.datainspect" title="pyffi.spells.SpellGroupBase.datainspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">datainspect()</span></code></a>, and <a class="reference internal" href="#pyffi.spells.SpellGroupBase.toastexit" title="pyffi.spells.SpellGroupBase.toastexit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toastexit()</span></code></a>).</p>
<dl class="py attribute">
<dt id="pyffi.spells.SpellGroupBase.ACTIVESPELLCLASSES">
<code class="sig-name descname">ACTIVESPELLCLASSES</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.SpellGroupBase.ACTIVESPELLCLASSES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of active spells of this group (not instantiated).
This list is automatically built when <a class="reference internal" href="#pyffi.spells.SpellGroupBase.toastentry" title="pyffi.spells.SpellGroupBase.toastentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toastentry()</span></code></a> is called.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.SpellGroupBase.SPELLCLASSES">
<code class="sig-name descname">SPELLCLASSES</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.SpellGroupBase.SPELLCLASSES" title="Permalink to this definition">¶</a></dt>
<dd><p>List of <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spell</span></code></a>s of this group (not instantiated).</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupBase.datainspect">
<code class="sig-name descname">datainspect</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupBase.datainspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupBase.datainspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect every spell with L{Spell.datainspect} and keep
those spells that must be cast.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.SpellGroupBase.spells">
<code class="sig-name descname">spells</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.SpellGroupBase.spells" title="Permalink to this definition">¶</a></dt>
<dd><p>List of active spell instances.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupBase.toastentry">
<em class="property">classmethod </em><code class="sig-name descname">toastentry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupBase.toastentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupBase.toastentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Called just before the toaster starts processing
all files. If it returns <code class="docutils literal notranslate"><span class="pre">False</span></code>, then the spell is not used.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>For example, if the spell only acts on a particular block type, but
that block type is excluded, then you can use this function to flag
that this spell can be skipped. You can also use this function to
initialize statistics data to be aggregated from files, to
initialize a log file, and so.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>toaster</strong> (<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>) – The toaster this spell is called from.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the spell applies, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupBase.toastexit">
<em class="property">classmethod </em><code class="sig-name descname">toastexit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupBase.toastexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupBase.toastexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called when the toaster has finished processing
all files.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>toaster</strong> (<a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>) – The toaster this spell is called from.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyffi.spells.SpellGroupParallelBase">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellGroupParallelBase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyffi.spells.SpellGroupBase" title="pyffi.spells.SpellGroupBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyffi.spells.SpellGroupBase</span></code></a></p>
<p>Base class for running spells in parallel (that is, with only
a single recursion in the tree).</p>
<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.branchentry">
<code class="sig-name descname">branchentry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase.branchentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.branchentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all spells.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.branchexit">
<code class="sig-name descname">branchexit</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase.branchexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.branchexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast a spell on the given branch, after all its children,
grandchildren, have been processed, if <a class="reference internal" href="#pyffi.spells.SpellGroupParallelBase.branchentry" title="pyffi.spells.SpellGroupParallelBase.branchentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">branchentry()</span></code></a> returned
<code class="docutils literal notranslate"><span class="pre">True</span></code> on the given branch.</p>
<p>Typically, you will override this function to perform a particular
operation on a block type, but you rely on the fact that the children
must have been processed first.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to cast the spell on.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.branchinspect">
<code class="sig-name descname">branchinspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase.branchinspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.branchinspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Inspect spells with <a class="reference internal" href="#pyffi.spells.Spell.branchinspect" title="pyffi.spells.Spell.branchinspect"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Spell.branchinspect()</span></code></a> (not all checks are
executed, only keeps going until a spell inspection returns <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.changed">
<em class="property">property </em><code class="sig-name descname">changed</code><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.changed" title="Permalink to this definition">¶</a></dt>
<dd><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.dataentry">
<code class="sig-name descname">dataentry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase.dataentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.dataentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Look into every spell with <a class="reference internal" href="#pyffi.spells.Spell.dataentry" title="pyffi.spells.Spell.dataentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Spell.dataentry()</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupParallelBase.dataexit">
<code class="sig-name descname">dataexit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupParallelBase.dataexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupParallelBase.dataexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Look into every spell with <a class="reference internal" href="#pyffi.spells.Spell.dataexit" title="pyffi.spells.Spell.dataexit"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Spell.dataexit()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="pyffi.spells.SpellGroupSeriesBase">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">SpellGroupSeriesBase</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">data</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">stream</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#pyffi.spells.SpellGroupBase" title="pyffi.spells.SpellGroupBase"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyffi.spells.SpellGroupBase</span></code></a></p>
<p>Base class for running spells in series.</p>
<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.branchentry">
<code class="sig-name descname">branchentry</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase.branchentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.branchentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Cast the spell on the given branch. First called with branch equal to
<code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>’s children, then the grandchildren, and so on.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Typically, you will override this function to perform an operation
on a particular block type and/or to stop recursion at particular
block types.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to cast the spell on.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the children must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.branchinspect">
<code class="sig-name descname">branchinspect</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase.branchinspect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.branchinspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <code class="xref py py-meth docutils literal notranslate"><span class="pre">_branchinspect()</span></code>, but for customization: can be overridden to
perform an extra inspection (the default implementation always
returns <code class="docutils literal notranslate"><span class="pre">True</span></code>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>branch</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">GlobalNode</span></code>) – The branch to check.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the branch must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.changed">
<em class="property">property </em><code class="sig-name descname">changed</code><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.changed" title="Permalink to this definition">¶</a></dt>
<dd><p>bool(x) -&gt; bool</p>
<p>Returns True when the argument x is true, False otherwise.
The builtins True and False are the only two instances of the class bool.
The class bool is a subclass of the class int, and cannot be subclassed.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.dataentry">
<code class="sig-name descname">dataentry</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase.dataentry"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.dataentry" title="Permalink to this definition">¶</a></dt>
<dd><p>Called before all blocks are recursed.
The default implementation simply returns <code class="docutils literal notranslate"><span class="pre">True</span></code>.
You can access the data via <code class="xref py py-attr docutils literal notranslate"><span class="pre">data</span></code>, and unlike in the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">datainspect()</span></code> method, the full file has been processed at this stage.</p>
<p>Typically, you will override this function to perform a global
operation on the file data.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> if the children must be processed, <code class="docutils literal notranslate"><span class="pre">False</span></code> otherwise.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">bool</span></code></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.dataexit">
<code class="sig-name descname">dataexit</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase.dataexit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.dataexit" title="Permalink to this definition">¶</a></dt>
<dd><p>Called after all blocks have been processed, if <a class="reference internal" href="#pyffi.spells.SpellGroupSeriesBase.dataentry" title="pyffi.spells.SpellGroupSeriesBase.dataentry"><code class="xref py py-meth docutils literal notranslate"><span class="pre">dataentry()</span></code></a>
returned <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<p>Typically, you will override this function to perform a final spell
operation, such as writing back the file in a special way, or making a
summary log.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.SpellGroupSeriesBase.recurse">
<code class="sig-name descname">recurse</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branch</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#SpellGroupSeriesBase.recurse"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.SpellGroupSeriesBase.recurse" title="Permalink to this definition">¶</a></dt>
<dd><p>Recurse spells in series.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="creating-toaster-scripts">
<h2>Creating toaster scripts<a class="headerlink" href="#creating-toaster-scripts" title="Permalink to this headline">¶</a></h2>
<p>To create a new toaster script, derive your toaster from the <a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a>
class, and set the <a class="reference internal" href="#pyffi.spells.Toaster.FILEFORMAT" title="pyffi.spells.Toaster.FILEFORMAT"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Toaster.FILEFORMAT</span></code></a> attribute of your toaster to
the file format class of the files it can toast.</p>
<dl class="py class">
<dt id="pyffi.spells.Toaster">
<em class="property">class </em><code class="sig-prename descclassname">pyffi.spells.</code><code class="sig-name descname">Toaster</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">spellclass</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">options</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">spellnames</span><span class="o">=</span><span class="default_value">None</span></em>, <em class="sig-param"><span class="n">logger</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Toaster base class. Toasters run spells on large quantities of files.
They load each file and pass the data structure to any number of spells.</p>
<dl class="py attribute">
<dt id="pyffi.spells.Toaster.ALIASDICT">
<code class="sig-name descname">ALIASDICT</code><em class="property"> = {}</em><a class="headerlink" href="#pyffi.spells.Toaster.ALIASDICT" title="Permalink to this definition">¶</a></dt>
<dd><p>Dictionary with aliases for spells.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.DEFAULT_OPTIONS">
<code class="sig-name descname">DEFAULT_OPTIONS</code><em class="property"> = {'applypatch': False, 'archives': False, 'arg': '', 'createpatch': False, 'destdir': '', 'diffcmd': '', 'dryrun': False, 'examples': False, 'exclude': [], 'gccollect': False, 'helpspell': False, 'include': [], 'inifile': '', 'interactive': True, 'jobs': 16, 'only': [], 'patchcmd': '', 'pause': False, 'prefix': '', 'raisetesterror': False, 'refresh': 32, 'resume': False, 'series': False, 'skip': [], 'sourcedir': '', 'spells': False, 'suffix': '', 'verbose': 1}</em><a class="headerlink" href="#pyffi.spells.Toaster.DEFAULT_OPTIONS" title="Permalink to this definition">¶</a></dt>
<dd><p>List of spell classes of the particular <a class="reference internal" href="#pyffi.spells.Toaster" title="pyffi.spells.Toaster"><code class="xref py py-class docutils literal notranslate"><span class="pre">Toaster</span></code></a> instance.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.EXAMPLES">
<code class="sig-name descname">EXAMPLES</code><em class="property"> = ''</em><a class="headerlink" href="#pyffi.spells.Toaster.EXAMPLES" title="Permalink to this definition">¶</a></dt>
<dd><p>Some examples which describe typical use of the toaster.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.FILEFORMAT">
<code class="sig-name descname">FILEFORMAT</code><a class="headerlink" href="#pyffi.spells.Toaster.FILEFORMAT" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <a class="reference internal" href="../object_models.html#pyffi.object_models.FileFormat" title="pyffi.object_models.FileFormat"><code class="xref py py-class docutils literal notranslate"><span class="pre">pyffi.object_models.FileFormat</span></code></a></p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.SPELLS">
<code class="sig-name descname">SPELLS</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.SPELLS" title="Permalink to this definition">¶</a></dt>
<dd><p>List of all available <a class="reference internal" href="#pyffi.spells.Spell" title="pyffi.spells.Spell"><code class="xref py py-class docutils literal notranslate"><span class="pre">Spell</span></code></a> classes.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.cli">
<code class="sig-name descname">cli</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.cli"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.cli" title="Permalink to this definition">¶</a></dt>
<dd><p>Command line interface: initializes spell classes and options from
the command line, and run the <a class="reference internal" href="#pyffi.spells.Toaster.toast" title="pyffi.spells.Toaster.toast"><code class="xref py py-meth docutils literal notranslate"><span class="pre">toast()</span></code></a> method.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.exclude_types">
<code class="sig-name descname">exclude_types</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.exclude_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of types corresponding to the exclude key of <a class="reference internal" href="#pyffi.spells.Toaster.options" title="pyffi.spells.Toaster.options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">options</span></code></a>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.get_toast_head_root_ext">
<code class="sig-name descname">get_toast_head_root_ext</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.get_toast_head_root_ext"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.get_toast_head_root_ext" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the name of where the input file <em>filename</em> would
be written to by the toaster: head, root, and extension.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>) – The name of the hypothetical file to be
toasted.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The head, root, and extension of the destination, or
<code class="docutils literal notranslate"><span class="pre">(None,</span> <span class="pre">None,</span> <span class="pre">None)</span></code> if <code class="docutils literal notranslate"><span class="pre">--dry-run</span></code> is specified.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a> of three <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>s</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.get_toast_stream">
<code class="sig-name descname">get_toast_stream</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em>, <em class="sig-param"><span class="n">test_exists</span><span class="o">=</span><span class="default_value">False</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.get_toast_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.get_toast_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Calls <code class="xref py py-meth docutils literal notranslate"><span class="pre">get_toast_head_root_ext(filename)()</span></code>
to determine the name of the toast file, and return
a stream for writing accordingly.</p>
<p>Then return a stream where result can be written to, or
in case test_exists is True, test if result would overwrite a
file. More specifically, if test_exists is True, then no
streams are created, and True is returned if the file
already exists, and False is returned otherwise.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.include_types">
<code class="sig-name descname">include_types</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.include_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of types corresponding to the include key of <a class="reference internal" href="#pyffi.spells.Toaster.options" title="pyffi.spells.Toaster.options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">options</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.indent">
<code class="sig-name descname">indent</code><em class="property"> = 0</em><a class="headerlink" href="#pyffi.spells.Toaster.indent" title="Permalink to this definition">¶</a></dt>
<dd><p>An <code class="docutils literal notranslate"><span class="pre">int</span></code> which describes the current indentation level for messages.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.inspect_filename">
<code class="sig-name descname">inspect_filename</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">filename</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.inspect_filename"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.inspect_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns whether to toast a filename or not, based on
skip_regexs and only_regexs.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.is_admissible_branch_class">
<code class="sig-name descname">is_admissible_branch_class</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">branchtype</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.is_admissible_branch_class"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.is_admissible_branch_class" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper function which checks whether a given branch type should
have spells cast on it or not, based in exclude and include options.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pyffi.formats.nif</span> <span class="kn">import</span> <span class="n">NifFormat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyToaster</span><span class="p">(</span><span class="n">Toaster</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">FILEFORMAT</span> <span class="o">=</span> <span class="n">NifFormat</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span> <span class="o">=</span> <span class="n">MyToaster</span><span class="p">()</span> <span class="c1"># no include or exclude: all admissible</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiProperty</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiNode</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span> <span class="o">=</span> <span class="n">MyToaster</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;include&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;NiProperty&quot;</span><span class="p">,</span> <span class="s2">&quot;NiNode&quot;</span><span class="p">],</span> <span class="s2">&quot;exclude&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;NiMaterialProperty&quot;</span><span class="p">,</span> <span class="s2">&quot;NiLODNode&quot;</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiProperty</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiNode</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiAVObject</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiLODNode</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiSwitchNode</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiMaterialProperty</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">toaster</span><span class="o">.</span><span class="n">is_admissible_branch_class</span><span class="p">(</span><span class="n">NifFormat</span><span class="o">.</span><span class="n">NiAlphaProperty</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.logger">
<code class="sig-name descname">logger</code><em class="property"> = &lt;Logger pyffi.toaster (WARNING)&gt;</em><a class="headerlink" href="#pyffi.spells.Toaster.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3/library/logging.html#logging.Logger" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">logging.Logger</span></code></a> for toaster log messages.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.msg">
<code class="sig-name descname">msg</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.msg"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Write log message with <code class="xref py py-meth docutils literal notranslate"><span class="pre">logger.info()</span></code>, taking into account
<a class="reference internal" href="#pyffi.spells.Toaster.indent" title="pyffi.spells.Toaster.indent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indent</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>message</strong> (<code class="docutils literal notranslate"><span class="pre">str</span></code>) – The message to write.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.msgblockbegin">
<code class="sig-name descname">msgblockbegin</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.msgblockbegin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.msgblockbegin" title="Permalink to this definition">¶</a></dt>
<dd><p>Acts like <a class="reference internal" href="#pyffi.spells.Toaster.msg" title="pyffi.spells.Toaster.msg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">msg()</span></code></a>, but also increases <a class="reference internal" href="#pyffi.spells.Toaster.indent" title="pyffi.spells.Toaster.indent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indent</span></code></a> after writing the
message.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.msgblockend">
<code class="sig-name descname">msgblockend</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">message</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.msgblockend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.msgblockend" title="Permalink to this definition">¶</a></dt>
<dd><p>Acts like <a class="reference internal" href="#pyffi.spells.Toaster.msg" title="pyffi.spells.Toaster.msg"><code class="xref py py-meth docutils literal notranslate"><span class="pre">msg()</span></code></a>, but also decreases <a class="reference internal" href="#pyffi.spells.Toaster.indent" title="pyffi.spells.Toaster.indent"><code class="xref py py-attr docutils literal notranslate"><span class="pre">indent</span></code></a> before writing the
message, but if the message argument is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then no message is
printed.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.only_regexs">
<code class="sig-name descname">only_regexs</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.only_regexs" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of regular expressions corresponding to the only key of <a class="reference internal" href="#pyffi.spells.Toaster.options" title="pyffi.spells.Toaster.options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">options</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.options">
<code class="sig-name descname">options</code><em class="property"> = {}</em><a class="headerlink" href="#pyffi.spells.Toaster.options" title="Permalink to this definition">¶</a></dt>
<dd><p>The options of the toaster, as <code class="docutils literal notranslate"><span class="pre">dict</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.parse_inifile">
<em class="property">static </em><code class="sig-name descname">parse_inifile</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">option</span></em>, <em class="sig-param"><span class="n">opt</span></em>, <em class="sig-param"><span class="n">value</span></em>, <em class="sig-param"><span class="n">parser</span></em>, <em class="sig-param"><span class="n">toaster</span><span class="o">=</span><span class="default_value">None</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.parse_inifile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.parse_inifile" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes spell classes and options from an ini file.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.skip_regexs">
<code class="sig-name descname">skip_regexs</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.skip_regexs" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple of regular expressions corresponding to the skip key of <a class="reference internal" href="#pyffi.spells.Toaster.options" title="pyffi.spells.Toaster.options"><code class="xref py py-attr docutils literal notranslate"><span class="pre">options</span></code></a>.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.spellnames">
<code class="sig-name descname">spellnames</code><em class="property"> = []</em><a class="headerlink" href="#pyffi.spells.Toaster.spellnames" title="Permalink to this definition">¶</a></dt>
<dd><p>A list of the names of the spells.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.toast">
<code class="sig-name descname">toast</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">top</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.toast"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.toast" title="Permalink to this definition">¶</a></dt>
<dd><p>Walk over all files in a directory tree and cast spells
on every file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>top</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.9)"><em>str</em></a>) – The directory or file to toast.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.toast_archives">
<code class="sig-name descname">toast_archives</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">top</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.toast_archives"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.toast_archives" title="Permalink to this definition">¶</a></dt>
<dd><p>Toast all files in all archives.</p>
</dd></dl>

<dl class="py attribute">
<dt id="pyffi.spells.Toaster.top">
<code class="sig-name descname">top</code><em class="property"> = ''</em><a class="headerlink" href="#pyffi.spells.Toaster.top" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of the top folder to toast.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.write">
<code class="sig-name descname">write</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the data to data and raises an exception if the
write fails, but restores file if fails on overwrite.</p>
</dd></dl>

<dl class="py method">
<dt id="pyffi.spells.Toaster.writepatch">
<code class="sig-name descname">writepatch</code><span class="sig-paren">(</span><em class="sig-param"><span class="n">stream</span></em>, <em class="sig-param"><span class="n">data</span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/pyffi/spells.html#Toaster.writepatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pyffi.spells.Toaster.writepatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a binary patch for the updated file.</p>
</dd></dl>

</dd></dl>

</div>
</div>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells</span></code> — High level file operations</a><ul>
<li><a class="reference internal" href="#supported-spells">Supported spells</a></li>
<li><a class="reference internal" href="#adding-new-spells">Adding new spells</a></li>
<li><a class="reference internal" href="#grouping-spells-together">Grouping spells together</a></li>
<li><a class="reference internal" href="#creating-toaster-scripts">Creating toaster scripts</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../formats/tri.html"
                        title="previous chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.formats.tri</span></code> — TRI (.tri)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="cgf.html"
                        title="next chapter"><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells.cgf</span></code> —  Crytek Geometry/Animation (.cgf/.cga) spells</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/pyffi/spells/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="cgf.html" title="pyffi.spells.cgf — Crytek Geometry/Animation (.cgf/.cga) spells"
             >next</a> |</li>
        <li class="right" >
          <a href="../formats/tri.html" title="pyffi.formats.tri — TRI (.tri)"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">PyFFI 2.2.4.dev4 documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../index.html" ><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi</span></code> — Interfacing block structured files</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><code class="xref py py-mod docutils literal notranslate"><span class="pre">pyffi.spells</span></code> — High level file operations</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2012-2019, NifTools.
      Last updated on Jan 26, 2021.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 3.4.3.
    </div>
  </body>
</html>